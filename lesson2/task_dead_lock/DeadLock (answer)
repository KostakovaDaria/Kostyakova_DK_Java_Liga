Проблема:

Synchronized не обеспечивал правильную блокировку поскольку оринтировался на объект вызовавший его. Тогда как 2 потока вызывали методы из разных объектов происходило следующее:

А -> bow(B) блокируются методы bow и bowBack объекта A
B -> bow (A) блокируются методы аналогично А

Когда A обращается к bowBack то она переходит в режим ожидания т.к. объект заблокирован потоком В. Тоже самое происходит со 2 потоком. Оба уходят во взаимоблокировку.

Решение:

При получении объектов проверять, что работа осуществляется с одной и той же последовательностью объектов. Установив последовательность, мы осуществляем synchronized
по данным объектам. Т.к. оба объекта захвачены 2 поток блокируется, ожидая окончания работы 1 потока.
